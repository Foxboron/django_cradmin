{% comment %}
    Includes the cradmin menu. You can make your view not render the menu by
    setting the ``cradmin_hide_menu`` context variable to ``True``.
{% endcomment %}
{% load i18n %}

{% if not cradmin_hide_menu %}
    <nav id="cradmin_menu" ng-controller="CradminMenuController">
        {% block pre-menu %}{% endblock pre-menu %}

        <div class="cradmin-menumobileheader">
            {% block mobile-header %}
                {% block mobile-header-pre %}{% endblock mobile-header-pre %}
                <button type="button" class="btn btn-default cradmin-menutoggle"
                        ng-click="toggleNavigation()">
                    {% block mobile-header-menutoggle-content %}
                        {% trans "Menu" %}
                    {% endblock mobile-header-menutoggle-content %}
                </button>
                {% block mobile-header-post %}{% endblock mobile-header-post %}
            {% endblock mobile-header %}
        </div>

        <div class="cradmin-menucontent"
                ng-class="{'cradmin-menucontent-display': displayMenu}">
            {% block menucontent %}
                {% with menu=request.cradmin_instance.get_menu %}
                    {% if menu.headeritems %}
                        <ul class="cradmin-menucontent-header">
                            {% for menuitem in menu.headeritems %}
                                {{ menuitem.render|safe }}
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if menu.mainitems %}
                        <ul class="cradmin-menucontent-main">
                            {% for menuitem in menu.mainitems %}
                                {{ menuitem.render|safe }}
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if menu.footeritems %}
                        <ul class="cradmin-menucontent-footer">
                            {% for menuitem in menu.footeritems %}
                                {{ menuitem.render|safe }}
                            {% endfor %}
                        </ul>
                    {% endif %}
                {% endwith %}
            {% endblock menucontent %}
        </div>

        {% block post-menu %}{% endblock post-menu %}
    </nav>
{% endif %}
