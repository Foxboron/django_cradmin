<div class="django-cradmin-datetime-selector"
        ng-class="{
            'django-cradmin-datetime-selector-show': page != null,
            'django-cradmin-datetime-selector-page1': page == 1,
            'django-cradmin-datetime-selector-page2': page == 2,
            'django-cradmin-datetime-selector-page3': page == 3
        }">

    <!-- -->
    <div class="django-cradmin-datetime-selector-backdrop"></div>

    <div class="django-cradmin-datetime-selector-contentwrapper">
        <div class="django-cradmin-datetime-selector-page django-cradmin-datetime-selector-dateview">
            <button type="button" class="sr-only" ng-focus="onFocusHead()"></button>
            <button type="button"
                    class="btn btn-link django-cradmin-datetime-selector-closebutton"
                    aria-label="{{ config.close_screenreader_text }}"
                    ng-click="hide()">
                        <span class="{{ config.close_icon }}" aria-hidden="true"></span>
                    </button>

            <div class="django-cradmin-datetime-selector-selectors-wrapper">
                <div class="django-cradmin-datetime-selector-selectors">
                    <div class="django-cradmin-datetime-selector-dateselectors">
                        <label for="{{ config.destinationfieldid }}_dayselect" class="sr-only">
                            {{ config.day_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_dayselect"
                                class="form-control django-cradmin-datetime-selector-dayselect"
                                ng-model="monthlyCaledarCoordinator.currentDayObject"
                                ng-options="dayobject.label for dayobject in monthlyCaledarCoordinator.dayobjects track by dayobject.value"
                                ng-change="onSelectDayNumber()">
                        </select>

                        <label for="{{ config.destinationfieldid }}_monthselect" class="sr-only">
                            {{ config.month_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_monthselect"
                                class="form-control django-cradmin-datetime-selector-monthselect"
                                ng-model="monthlyCaledarCoordinator.currentMonthObject"
                                ng-options="monthobject.label for monthobject in monthlyCaledarCoordinator.monthobjects track by monthobject.value"
                                ng-change="onSelectMonth()">
                        </select>

                        <label for="{{ config.destinationfieldid }}_yearselect" class="sr-only">
                            {{ config.year_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_yearselect"
                                class="form-control django-cradmin-datetime-selector-yearselect"
                                ng-model="monthlyCaledarCoordinator.currentYearObject"
                                ng-options="yearobject.label for yearobject in monthlyCaledarCoordinator.yearobjects track by yearobject.value"
                                ng-change="onSelectYear()">
                        </select>
                    </div>

                    <div class="django-cradmin-datetime-selector-timeselectors" ng-if="config.include_time">
                        <label for="{{ config.destinationfieldid }}_hourselect" class="sr-only">
                            {{ config.hour_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_hourselect"
                                class="form-control django-cradmin-datetime-selector-hourselect"
                                ng-model="monthlyCaledarCoordinator.currentHourObject"
                                ng-options="hourobject.label for hourobject in monthlyCaledarCoordinator.hourobjects track by hourobject.value"
                                ng-change="onSelectHour()">
                        </select>
                        :
                        <label for="{{ config.destinationfieldid }}_minuteselect" class="sr-only">
                            {{ config.minute_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_minuteselect"
                                class="form-control django-cradmin-datetime-selector-minuteselect"
                                ng-model="monthlyCaledarCoordinator.currentMinuteObject"
                                ng-options="minuteobject.label for minuteobject in monthlyCaledarCoordinator.minuteobjects track by minuteobject.value"
                                ng-change="onSelectMinute()">
                        </select>
                    </div>

                    <button type="button"
                            class="btn btn-primary django-cradmin-datetime-selector-use-button"
                            ng-click="onClickUseTime()"
                            aria-label="{{ getUseButtonAriaLabel() }}">
                        {{ config.usebuttonlabel }}
                    </button>
                </div>
            </div>

            <table class="django-cradmin-datetime-selector-table">
                <caption class="sr-only">
                    {{ config.dateselector_table_screenreader_caption }}
                </caption>
                <thead>
                    <tr>
                        <th ng-repeat="weekday in monthlyCaledarCoordinator.shortWeekdays">
                            {{ weekday }}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="calendarWeek in monthlyCaledarCoordinator.calendarMonth.calendarWeeks">
                        <!--
                        NOTE: We do not support tabindex based keyboard navigation here because that would
                        break screenreader support. Instead, we provide the select-based date and time
                        pickers for screenreaders (just like for mobile).
                        -->
                        <td ng-repeat="calendarDay in calendarWeek.calendarDays"
                                class="django-cradmin-datetime-selector-daybuttoncell"
                                ng-class="{
                                    'django-cradmin-datetime-selector-daybuttoncell-not-in-current-month': !calendarDay.isInCurrentMonth,
                                    'django-cradmin-datetime-selector-daybuttoncell-in-current-month': calendarDay.isInCurrentMonth,
                                    'django-cradmin-datetime-selector-daybuttoncell-selected': calendarDay.momentObject.isSame(monthlyCaledarCoordinator.selectedDateMomentObject, 'day')
                                }">
                            <button type="button" class="btn btn-link"
                                    ng-click="onClickCalendarDay(calendarDay)"
                                    tabindex="{{ getTabindexForCalendarDay(calendarDay) }}"
                                    aria-label="{{ calendarDay.momentObject.format('MMMM D') }}">
                                {{ calendarDay.getNumberInMonth() }}
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <button type="button" class="sr-only" ng-focus="onFocusTail()"></button>
        </div>

        <div class="django-cradmin-datetime-selector-page django-cradmin-datetime-selector-timeview">
            <button type="button" class="sr-only" ng-focus="onFocusHead()"></button>
            <button type="button"
                    class="btn btn-link django-cradmin-datetime-selector-closebutton"
                    aria-label="{{ config.close_screenreader_text }}"
                    ng-click="hide()">
                        <span class="{{ config.close_icon }}" aria-hidden="true"></span>
                    </button>

            <button type="button"
                    class="btn btn-link django-cradmin-datetime-selector-backbutton"
                    tabindex="0"
                    aria-label="{{ config.back_to_datepicker_screenreader_text }}"
                    ng-click="showPage1()">
                <span class="django-cradmin-datetime-selector-backbutton-icon-outer-wrapper">
                    <span class="django-cradmin-datetime-selector-backbutton-icon-inner-wrapper">
                        <span class="django-cradmin-datetime-selector-backbutton-icon {{ config.back_icon }}"></span>
                    </span>
                </span>
            </button>

            <div class="django-cradmin-datetime-selector-timeview-body-wrapper">
                <div class="django-cradmin-datetime-selector-timeview-body">
                    <p class="django-cradmin-datetime-selector-datepreview">
                        {{ getTimeselectorDatepreview() }}
                    </p>
                    <div class="django-cradmin-datetime-selector-timeselectors">
                        <label for="{{ config.destinationfieldid }}_hourselect" class="sr-only">
                            {{ config.hour_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_hourselect"
                                class="form-control django-cradmin-datetime-selector-hourselect"
                                ng-model="monthlyCaledarCoordinator.currentHourObject"
                                ng-options="hourobject.label for hourobject in monthlyCaledarCoordinator.hourobjects track by hourobject.value"
                                ng-change="onSelectHour()">
                        </select>
                        :
                        <label for="{{ config.destinationfieldid }}_minuteselect" class="sr-only">
                            {{ config.minute_screenreader_text }}
                        </label>
                        <select id="{{ config.destinationfieldid }}_minuteselect"
                                class="form-control django-cradmin-datetime-selector-minuteselect"
                                ng-model="monthlyCaledarCoordinator.currentMinuteObject"
                                ng-options="minuteobject.label for minuteobject in monthlyCaledarCoordinator.minuteobjects track by minuteobject.value"
                                ng-change="onSelectMinute()">
                        </select>
                        <button type="button"
                                class="btn btn-primary django-cradmin-datetime-selector-use-button"
                                ng-click="onClickUseTime()"
                                aria-label="{{ getUseButtonAriaLabel() }}">
                            {{ config.usebuttonlabel }}
                        </button>
                    </div>
                </div>
            </div>
            <button type="button" class="sr-only" ng-focus="onFocusTail()"></button>
        </div>
    </div>
</div>
